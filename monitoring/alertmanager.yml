global:
  resolve_timeout: 1m

route:
  receiver: default
  group_by: ['alertname']
  group_wait: 5s
  group_interval: 10s
  repeat_interval: 1m

receivers:
  - name: default
    # 1) Slack 알림
    slack_configs:
      - api_url: "Slack Webhook URL 입력"  # 필요하면 변경
        channel: "#alerts"          # 필요하면 변경 (또는 제거하면 webhook 설정 채널로 감)
        send_resolved: true
        title: "[{{ .Status | toUpper }}] {{ .CommonLabels.alertname }}"
        text: |
          *Severity:* {{ .CommonLabels.severity }}
          *Summary:* {{ .CommonAnnotations.summary }}
          *Description:* {{ .CommonAnnotations.description }}
          {{- if .ExternalURL }}
          *Alertmanager:* {{ .ExternalURL }}
          {{- end }}

    # 2) (기존) FastAPI 웹훅 유지
    webhook_configs:
      - url: "http://host.docker.internal:8000/alertmanager"
        send_resolved: true
